{"version":3,"sources":["time-stamp.js"],"names":[],"mappings":";;;;;;;;;;qBAAkB,SAAS;;;;qBAEZ,UAAC,KAAK,EAAE,OAAO,EAAK;;AAEjC,0BAAM,8BAA8B,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC;;AAEvD,WAAc,OAAO,EAAE,EAAE,SAAS,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;;AAE1F,0BAAM,SAAS,EAAE,OAAO,CAAC,CAAC;;AAE1B,OAAK,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;AACtG,OAAK,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;;AAEpF,OAAK,CAAC,OAAO,CAAC,aAAa,EAAE,UAAC,GAAG,EAAE,IAAI,EAAK;AAC1C,4BAAM,aAAa,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;AAClC,QAAI,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,OAAO,CAAC,aAAa,EAAE;AAAE,aAAO,IAAI,EAAE,CAAC;KAAE;AAChE,QAAI,GAAG,CAAC,QAAQ,EAAE;AAChB,8BAAM,uBAAuB,EAAE,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AACxF,SAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;KAC9C,MAAM;AACL,8BAAM,iCAAiC,EAAE,GAAG,CAAC,KAAK,CAAC,eAAe,EAAE,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;AAClG,SAAG,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;KAC1C;AACD,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;CAEJ","file":"time-stamp.js","sourcesContent":["import debug from './debug';\n\nexport default (Model, options) => {\n\n  debug('TimeStamp mixin for Model %s', Model.modelName);\n\n  Object.assign(options, { createdAt: 'createdAt', updatedAt: 'updatedAt', required: true});\n\n  debug('options', options);\n\n  Model.defineProperty(options.createdAt, { type: Date, required: options.required, defaultFn: 'now' });\n  Model.defineProperty(options.updatedAt, { type: Date, required: options.required });\n\n  Model.observe('before save', (ctx, next) => {\n    debug('ctx.options', ctx.options);\n    if (ctx.options && ctx.options.skipUpdatedAt) { return next(); }\n    if (ctx.instance) {\n      debug('%s.%s before save: %s', ctx.Model.modelName, options.updatedAt, ctx.instance.id);\n      ctx.instance[options.updatedAt] = new Date();\n    } else {\n      debug('%s.%s before update matching %j', ctx.Model.pluralModelName, options.updatedAt, ctx.where);\n      ctx.data[options.updatedAt] = new Date();\n    }\n    next();\n  });\n\n};\n"],"sourceRoot":"/Users/clarkbw/src/pi/loopback-ds-timestamp-mixin/es6"}